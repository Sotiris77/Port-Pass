services:
  - type: web
    name: global-port-pass-api
    env: docker
    region: frankfurt

    # Tell Render where the Dockerfile is and use backend as build context
    rootDir: backend
    dockerfilePath: ./Dockerfile

    healthCheckPath: /health
    autoDeploy: true

    envVars:
      - key: ENV
        value: production
      - key: SECRET_KEY
        sync: false
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: 60

      # Postgres (fill in on Render â†’ Environment)
      - key: POSTGRES_USER
        sync: false
      - key: POSTGRES_PASSWORD
        sync: false
      - key: POSTGRES_DB
        sync: false
      - key: POSTGRES_HOST
        sync: false
      - key: POSTGRES_PORT
        value: 5432

      # Cloudflare R2
      - key: S3_ENDPOINT_URL
        sync: false   # set actual value in the dashboard
      - key: S3_BUCKET
        sync: false
      - key: S3_REGION
        value: auto
      - key: S3_ACCESS_KEY
        sync: false
      - key: S3_SECRET_KEY
        sync: false
      - key: S3_USE_SSL
        value: true

      - key: ADMIN_EMAIL
        value: sotiriskaramanoglou@gmail.com

